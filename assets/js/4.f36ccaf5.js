(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{305:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-11-10.c4276cb7.jpg"},331:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-30-26.e51bfe6b.jpg"},332:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-42-08.8a3b179a.jpg"},333:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_23-00-08.216001f3.jpg"},465:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-16-35.fad24c35.jpg"},466:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-14-12.dc433e86.jpg"},467:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-18-09.a51e205d.jpg"},468:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-27-38.e4c9f35c.jpg"},469:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-32-15.6d8bd2a1.jpg"},470:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-35-23.178995d1.jpg"},471:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-40-22.62febb60.jpg"},472:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-38-17.170f70b2.jpg"},473:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-41-43.5c97423f.jpg"},474:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-45-40.b4f07c0f.jpg"},475:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_22-59-32.2d479f0c.jpg"},476:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_23-01-00.e48b5d87.jpg"},477:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_23-42-37.af5c3634.jpg"},478:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-22_23-49-35.227477d5.jpg"},479:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-23_00-10-56.a957b568.jpg"},480:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-23_00-12-00.6dc6073d.jpg"},512:function(t,s,a){"use strict";a.r(s);var n=a(23),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"_4-手動實作討論群的-新增-修改-刪除-功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-手動實作討論群的-新增-修改-刪除-功能"}},[t._v("#")]),t._v(" 4-手動實作討論群的“新增”“修改”“刪除”功能")]),t._v(" "),n("blockquote",[n("p",[t._v("預計學習時間: 1小時以內")])]),t._v(" "),n("h2",{attrs:{id:"_4-1-本章目標"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-本章目標"}},[t._v("#")]),t._v(" 4-1 本章目標")]),t._v(" "),n("h3",{attrs:{id:"目標"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目標"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),n("ul",[n("li",[t._v("實作看板的“新增” new / create")]),t._v(" "),n("li",[t._v("實作看板的“編輯” edit / update")]),t._v(" "),n("li",[t._v("實作看板的“刪除” destroy")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(305),alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(331),alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(332),alt:""}})]),t._v(" "),n("p",[n("strong",[t._v("額外會談到的主題是：")])]),t._v(" "),n("ul",[n("li",[t._v('使用 gem "simple_form" 產生表單')]),t._v(" "),n("li",[t._v("限制看板標題“不得為空”")])]),t._v(" "),n("h2",{attrs:{id:"_4-2-實作討論群-新增-功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-實作討論群-新增-功能"}},[t._v("#")]),t._v(" 4-2 實作討論群“新增”功能")]),t._v(" "),n("h3",{attrs:{id:"目標-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目標-2"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),n("ul",[n("li",[t._v("這一章我們要實作 討論群 的新增功能")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(305),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"步驟"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步驟"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),n("h4",{attrs:{id:"step-0-git-checkout-b-ch03"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-0-git-checkout-b-ch03"}},[t._v("#")]),t._v(" Step 0. git checkout -b ch03")]),t._v(" "),n("p",[t._v("因為我們現在要實作第三章的內容，新增一個 branch 把實作內容集中在 ch03 是比較合理的。將來回顧就可以比較清楚 在 ch03 我們做了哪一些練習。")]),t._v(" "),n("p",[n("code",[t._v("git checkout -b ch03")])]),t._v(" "),n("h4",{attrs:{id:"step-1-建立-new-action"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-1-建立-new-action"}},[t._v("#")]),t._v(" Step 1. 建立 new action")]),t._v(" "),n("p",[t._v("修改 app/controllers/groups_controller.rb 加入 new action")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/groups_controller.rb")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GroupsController")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationController")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@groups")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("all\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),n("h4",{attrs:{id:"step-2-建立-new-action-的表單"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-2-建立-new-action-的表單"}},[t._v("#")]),t._v(" Step 2. 建立 new action 的表單")]),t._v(" "),n("p",[n("code",[t._v("touch app/views/groups/new.html.erb")])]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/new.html.erb --\x3e")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("row justify-content-center mt-2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col-5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("新增討論版"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("hr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" form_for "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("f"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("label")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("group_title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("標題"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("label")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text_field "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'form-control'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("label")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("group_description"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("敘述"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("label")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text_area "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":description")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'form-control'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("submit "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Submit"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'btn btn-primary'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("disable_with"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Submitting...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("然後打開 http://localhost:3000/groups/new，可以見到成果")]),t._v(" "),n("p",[n("img",{attrs:{src:a(305),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"step-3-git-存檔"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-3-git-存檔"}},[t._v("#")]),t._v(" Step 3. git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "implement groups#new"')])]),t._v(" "),n("h4",{attrs:{id:"step-4-建立-create-action，接收數據並儲存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-4-建立-create-action，接收數據並儲存"}},[t._v("#")]),t._v(" Step 4. 建立 create action，接收數據並儲存")]),t._v(" "),n("p",[t._v("目前還只是個表單畫面，無法將數據送出後成功建立出一筆討論版的數據，缺了 action create。如果此時你按下 Submit，會看到這樣的畫面：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(465),alt:""}})]),t._v(" "),n("p",[t._v("所以這時候，我們要實作 create action，接收 new 裡的表單送出的訊息，變成一筆存在數據庫裡的數據。")]),t._v(" "),n("p",[t._v("修改 app/controllers/groups_controller.rb")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/groups_controller.rb")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GroupsController")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationController")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@groups")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("all\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("     redirect_to groups_path\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("group_params")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("permit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":description")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),n("p",[t._v("完成後再送一次即可成功建立數據，可以多建幾筆數據測試功能。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(466),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"step-5-git-存檔"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-5-git-存檔"}},[t._v("#")]),t._v(" Step 5. git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "implement groups#create"')])]),t._v(" "),n("h2",{attrs:{id:"_4-3-實作討論群-瀏覽-功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-實作討論群-瀏覽-功能"}},[t._v("#")]),t._v(" 4-3 實作討論群“瀏覽”功能")]),t._v(" "),n("h3",{attrs:{id:"目標-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目標-3"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),n("ul",[n("li",[t._v("這一章我們要實作 討論群 的瀏覽功能")])]),t._v(" "),n("p",[t._v("這時候如果直接點 index 上的 title 連結, 會跳出下面的錯誤訊息：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(467),alt:""}})]),t._v(" "),n("p",[t._v("我們要修正這個問題，讓使用者可以瀏覽這個頁面")]),t._v(" "),n("h3",{attrs:{id:"步驟-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),n("h4",{attrs:{id:"step1-建立-show-action"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step1-建立-show-action"}},[t._v("#")]),t._v(" Step1: 建立 show action")]),t._v(" "),n("p",[t._v("在 app/controllers/groups_controller.rb 加入 show action")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/groups_controller.rb")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GroupsController")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationController")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@groups")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("all\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save\n\n    redirect_to groups_path\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("group_params")])]),t._v("\n    params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("permit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":description")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),n("h4",{attrs:{id:"step-2-加入-app-views-groups-show-html-erb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-2-加入-app-views-groups-show-html-erb"}},[t._v("#")]),t._v(" Step 2: 加入 app/views/groups/show.html.erb")]),t._v(" "),n("p",[n("code",[t._v("touch app/views/groups/show.html.erb")])]),t._v(" "),n("p",[t._v("加入以下內容")]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/show.html.erb --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("row mt-2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col text-right"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" link_to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Edit"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" edit_group_path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"btn btn-primary"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("description "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("然後，當你瀏覽 http://localhost:3000/groups/1 時，頁面就會長這樣")]),t._v(" "),n("p",[n("img",{attrs:{src:a(468),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"step-3-git-存檔-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-3-git-存檔-2"}},[t._v("#")]),t._v(" Step 3 : git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "implement groups#show"')])]),t._v(" "),n("h2",{attrs:{id:"_4-4-實作討論群-編輯-功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-實作討論群-編輯-功能"}},[t._v("#")]),t._v(" 4-4 實作討論群“編輯”功能")]),t._v(" "),n("h3",{attrs:{id:"目標-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目標-4"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),n("ul",[n("li",[t._v("這一節我們要實作 討論群 的編輯功能")])]),t._v(" "),n("h3",{attrs:{id:"步驟："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步驟："}},[t._v("#")]),t._v(" 步驟：")]),t._v(" "),n("h4",{attrs:{id:"step-1-建立-edit-action"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-1-建立-edit-action"}},[t._v("#")]),t._v(" Step 1. 建立 edit action")]),t._v(" "),n("p",[t._v("修改 app/controllers/groups_controller.rb 加入 edit action")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/groups_controller.rb")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GroupsController")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationController")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 略 ...")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("edit")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 略 ...")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),n("h4",{attrs:{id:"step-2-建立-edit-action-的表單"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-2-建立-edit-action-的表單"}},[t._v("#")]),t._v(" Step 2. 建立 edit action 的表單")]),t._v(" "),n("p",[t._v("新增 app/views/groups/edit.html.erb")]),t._v(" "),n("p",[n("code",[t._v("touch app/views/groups/edit.html.erb")])]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/edit.html.erb --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("row justify-content-center mt-2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col-5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("編輯討論版"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("hr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" form_for "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("f"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("label")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("group_title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("標題"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("label")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text_field "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'form-control'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("label")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("group_description"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("敘述"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("label")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text_area "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":description")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'form-control'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("submit "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Submit"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'btn btn-primary'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("disable_with"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Submitting...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("然後打開 "),n("a",{attrs:{href:"http://localhost:3000/groups/1/edit",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000/groups/1/edit"),n("OutboundLink")],1),t._v("，可以見到成果")]),t._v(" "),n("p",[n("img",{attrs:{src:a(331),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"step-3-git-存檔-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-3-git-存檔-3"}},[t._v("#")]),t._v(" Step 3. git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "implement groups#edit"')])]),t._v(" "),n("h4",{attrs:{id:"step-4-實作-update-action"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-4-實作-update-action"}},[t._v("#")]),t._v(" Step 4. 實作 update action")]),t._v(" "),n("p",[t._v("這時候我們可以嘗試修改裡面的數據，並試著送出。但是我們發現會跳出錯誤訊息，提醒我們 update 還沒實作：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(469),alt:""}})]),t._v(" "),n("p",[t._v("所以這時候，我們要實作 update action，接收 edit 裡的表單送出的訊息，真正更新存在數據庫裡的數據。")]),t._v(" "),n("p",[t._v("修改 app/controllers/groups_controller.rb")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controller/groups_controller.rb")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GroupsController")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationController")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ... 略")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save\n\n    redirect_to groups_path\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("update"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   redirect_to groups_path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Update Success"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ... 略")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),n("p",[t._v("然後試著更新一下數據，成功畫面應該會有“綠色”提示訊息。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(470),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"step-5-git-存檔-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-5-git-存檔-2"}},[t._v("#")]),t._v(" Step 5. git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "implement groups#update"')])]),t._v(" "),n("h2",{attrs:{id:"_4-5-實作討論群-刪除-功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-實作討論群-刪除-功能"}},[t._v("#")]),t._v(" 4-5 實作討論群“刪除”功能")]),t._v(" "),n("h3",{attrs:{id:"目標-5"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目標-5"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),n("ul",[n("li",[t._v("這一節我們要實作 討論群 的刪除功能")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(471),alt:""}})]),t._v(" "),n("p",[t._v("當我們點擊 delete 按鈕的時候, 會跳出下面的錯誤訊息")]),t._v(" "),n("p",[n("img",{attrs:{src:a(472),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"步驟：-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步驟：-2"}},[t._v("#")]),t._v(" 步驟：")]),t._v(" "),n("h4",{attrs:{id:"step1-建立-delete-action"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step1-建立-delete-action"}},[t._v("#")]),t._v(" Step1. 建立 delete action")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/groups_controller.rb")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# .... 略")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("update"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    redirect_to groups_path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Update Success"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("destroy\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   flash"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Group deleted"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   redirect_to groups_path\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# .... 略")]),t._v("\n")])])]),n("p",[t._v("然後，按下刪除鍵之後，就可以把該筆記錄刪除。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(473),alt:""}})]),t._v(" "),n("p",[t._v("如果成功的話，可以看到顯示“紅色”的訊息。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(332),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"step-2-git-存檔"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-2-git-存檔"}},[t._v("#")]),t._v(" Step 2. git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "implement groups#destroy"')])]),t._v(" "),n("h2",{attrs:{id:"_4-6-限制-標題為空-的group，不能被新增"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-限制-標題為空-的group，不能被新增"}},[t._v("#")]),t._v(" 4-6 限制“標題為空”的Group，不能被新增")]),t._v(" "),n("h3",{attrs:{id:"目標-6"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目標-6"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),n("ul",[n("li",[t._v("有時候我們會遇到使用者手殘，直接送出全空的表單，結果就出現空文章")]),t._v(" "),n("li",[t._v("因此我們要加上一個限制，讓使用者不能送出“空標題”文章才對")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(305),alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(474),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"步驟-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步驟-3"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),n("h4",{attrs:{id:"step-1-在-group-model-加入-標題限制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-1-在-group-model-加入-標題限制"}},[t._v("#")]),t._v(" Step 1: 在 Group model 加入“標題限制”")]),t._v(" "),n("p",[t._v("修改 app/models/group.rb 讓它長得像這樣")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/models/group.rb")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationRecord")]),t._v("\n  validates "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" presence"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),n("p",[t._v("這樣一來，就算送出了空的表單，也不會產生任何紀錄。")]),t._v(" "),n("p",[t._v("但我們真正希望達到的效果是像這樣子的，送出了空表單，使用者能夠確切地知道，自己是因為什麼錯誤被攔下：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(333),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"step-2-在-groups-controller-裡面加入儲存失敗的判斷"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-2-在-groups-controller-裡面加入儲存失敗的判斷"}},[t._v("#")]),t._v(" Step 2: 在 groups_controller 裡面加入儲存失敗的判斷")]),t._v(" "),n("p",[t._v("修改 app/controllers/groups_controller.rb")]),t._v(" "),n("p",[t._v("將 create action 修改成這樣：")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/groups_controller.rb")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save\n    redirect_to groups_path\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    render "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":new")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),n("p",[t._v("然後修改 app/views/groups/new.html.erb")]),t._v(" "),n("p",[t._v("在 form_for 下方加入這一段：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(475),alt:""}})]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/new.html.erb --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("any"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert alert-danger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("role")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("full_messages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" msg "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),n("p",[t._v("然後就可以產生這樣的效果")]),t._v(" "),n("p",[n("img",{attrs:{src:a(333),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"step-3-git-存檔-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-3-git-存檔-4"}},[t._v("#")]),t._v(" Step 3 : git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "add validation to title"')])]),t._v(" "),n("h4",{attrs:{id:"step-4-修改-edit-action"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-4-修改-edit-action"}},[t._v("#")]),t._v(" Step 4 : 修改 edit action")]),t._v(" "),n("p",[t._v("還有一種情況是，在修改時，把標題改成空白的。"),n("br"),t._v("\n所以我們也要避免這樣的情況發生。")]),t._v(" "),n("p",[t._v("修改 app/controllers/groups_controller.rb，的 update action 讓他長得像這樣")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/groups_controller.rb")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token method-definition"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("update"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    redirect_to groups_path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Update Success"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    render "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":edit")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),n("p",[t._v("然後修改 app/views/groups/edit.html.erb")]),t._v(" "),n("p",[t._v("也在 form_for 下方加入這一段：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(476),alt:""}})]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/edit.html.erb --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("any"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert alert-danger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("role")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("full_messages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" msg "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),n("p",[t._v("這樣，在“編輯”時，也有一樣的效果。")]),t._v(" "),n("h4",{attrs:{id:"step-5-git-存檔-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-5-git-存檔-3"}},[t._v("#")]),t._v(" Step 5 : git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "add validation to title apply to edit/update"')])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("本節常見問題")]),t._v(" "),n("p",[n("code",[t._v("validates :title, presence: true")]),t._v(" 是什麼意思")]),t._v(" "),n("ul",[n("li",[t._v("這是 Rails 的 Model 內建的“驗證”函式。意思是“不得為空”。")]),t._v(" "),n("li",[t._v("其實 Rails 還有很多內建驗質函式，你可以看這裡："),n("a",{attrs:{href:"http://guides.rubyonrails.org/active_record_validations.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://guides.rubyonrails.org/active_record_validations.html"),n("OutboundLink")],1)])])]),t._v(" "),n("h2",{attrs:{id:"_4-7-共用-表單"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-7-共用-表單"}},[t._v("#")]),t._v(" 4-7 共用“表單”")]),t._v(" "),n("h3",{attrs:{id:"目標-7"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目標-7"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),n("ul",[n("li",[t._v("把 new 與 edit 重複的表單程式碼，抽成一個共用文件")])]),t._v(" "),n("p",[t._v("我們觀察到，new 與 edit 都有相同的“表單程式碼”，顯得相當累贅。在這裡我們可以利用一個 Rails  內建的架構  partial去整理設計。")]),t._v(" "),n("h3",{attrs:{id:"步驟-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步驟-4"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),n("h4",{attrs:{id:"step-1-產生-app-views-groups-form-html-erb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-1-產生-app-views-groups-form-html-erb"}},[t._v("#")]),t._v(" Step 1: 產生 app/views/groups/_form.html.erb")]),t._v(" "),n("p",[n("code",[t._v("touch app/views/groups/_form.html.erb")])]),t._v(" "),n("p",[t._v("填入以下內容：")]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/_form.html.erb --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" form_for "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("f"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("any"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert alert-danger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("role")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("full_messages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" msg "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("label")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("group_title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("標題"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("label")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text_field "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'form-control'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("label")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("group_description"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("敘述"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("label")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text_area "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":description")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'form-control'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("submit "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Submit"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'btn btn-primary'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("disable_with"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Submitting...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),n("h4",{attrs:{id:"step-2-修改-app-views-groups-new-html-erb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-2-修改-app-views-groups-new-html-erb"}},[t._v("#")]),t._v(" Step 2: 修改 app/views/groups/new.html.erb")]),t._v(" "),n("p",[t._v('修改 app/views/groups/new.html.erb，把原先重複的表單程式碼“整段刪掉”，改成 <%= render "form" %>')]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/new.html.erb --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("row justify-content-center mt-2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col-5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("新增討論版"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("hr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" render "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"form"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h4",{attrs:{id:"step-3-修改-app-views-groups-edit-html-erb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-3-修改-app-views-groups-edit-html-erb"}},[t._v("#")]),t._v(" Step 3: 修改 app/views/groups/edit.html.erb")]),t._v(" "),n("p",[t._v("修改 app/views/groups/edit.html.erb，把原先重複的表單源程式碼“整段刪掉”，改成 "),n("code",[t._v('<%= render "form" %>')])]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/edit.html.erb --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("row justify-content-center mt-2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("col-5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("編輯討論版"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("hr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" render "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"form"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h4",{attrs:{id:"step-4-git-存檔"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-4-git-存檔"}},[t._v("#")]),t._v(" Step 4: git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "move form to partial"')])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("本節常見問題")]),t._v(" "),n("p",[t._v('教材裡的render "form"是什麼意思？'),n("br"),t._v("\n其實這是 "),n("code",[t._v('<%= render :partial => "form" %>')]),t._v(" 的“縮寫”，意思是我要引用 Partial (局部）頁面的方式。因為我們發現有很大量的程式碼重複，所以可以用這樣的方式收納。")]),t._v(" "),n("p",[t._v("它的規則是同目錄底下的 _xxxx.html.erb")])]),t._v(" "),n("h2",{attrs:{id:"_4-8-使用-simpleform-簡化表單"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-8-使用-simpleform-簡化表單"}},[t._v("#")]),t._v(" 4-8 使用 SimpleForm 簡化表單")]),t._v(" "),n("h3",{attrs:{id:"目標-8"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目標-8"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),n("ul",[n("li",[t._v("將表單換為 SimpleForm")])]),t._v(" "),n("h4",{attrs:{id:"step-1-安裝-simpleform"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-1-安裝-simpleform"}},[t._v("#")]),t._v(" Step 1: 安裝 SimpleForm")]),t._v(" "),n("p",[t._v("在這張表單 HTML 中，我們見到很囉唆的語句：")]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group string optional"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string optional control-label"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text_field "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string optional form-control"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("然後每一個欄位，都必須要用 bootstrap 指定的樣式，重新裝潢。但是如此一來，要是在欄位很多時，要寫的 HTML 就要寫上不少。有沒有方法可以簡化呢？")]),t._v(" "),n("p",[t._v("這邊我們要介紹一個 gem 叫做 simple_form，它可以幫你簡化複雜的表單這件事。")]),t._v(" "),n("p",[t._v("首先我們要來安裝 simple_form")]),t._v(" "),n("p",[t._v("打開 Gemfile，然後新增一行 gem 'simple_form'")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Gemfile")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" gem "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'simple_form'")]),t._v("\n")])])]),n("p",[t._v("然後執行 "),n("code",[t._v("bundle install")]),t._v(" 安裝 gem。")]),t._v(" "),n("h4",{attrs:{id:"step-2-安裝-simple-form-for-bootstrap-的設定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-2-安裝-simple-form-for-bootstrap-的設定"}},[t._v("#")]),t._v(" Step 2: 安裝 simple_form for bootstrap 的設定")]),t._v(" "),n("p",[t._v("執行：")]),t._v(" "),n("p",[n("code",[t._v("rails generate simple_form:install --bootstrap")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(477),alt:""}})]),t._v(" "),n("p",[t._v("然後重開 rails server（ 按 ctrl＋c 終止 rails server， 再執行 "),n("code",[t._v("rails s")]),t._v("）")]),t._v(" "),n("p",[t._v("這個指令會產生兩個文件")]),t._v(" "),n("ul",[n("li",[t._v("config/initializers/simple_form.rb")]),t._v(" "),n("li",[t._v("config/initializers/simple_form_bootstrap.rb （這個是 Bootstrap 表單的“佈景”)")])]),t._v(" "),n("h4",{attrs:{id:"step-3-修改-app-views-groups-form-html-erb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-3-修改-app-views-groups-form-html-erb"}},[t._v("#")]),t._v(" Step 3: 修改 app/views/groups/_form.html.erb")]),t._v(" "),n("p",[t._v("把內容改成")]),t._v(" "),n("div",{staticClass:"language-erb extra-class"},[n("pre",{pre:!0,attrs:{class:"language-erb"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/groups/_form.html.erb --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" simple_form_for "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("f"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("form-group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("input "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("input "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":description")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("submit "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Submit"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'btn btn-primary'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("disable_with"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Submitting...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token erb language-erb"}},[n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),n("p",[t._v("然後打開 http://localhost:3000/groups/new 就可以看到這樣的成果了。更棒的是 simple_form 提供的錯誤訊息，直接是在欄位旁邊的。更明顯更直觀。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(478),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"step-4-git-存檔-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step-4-git-存檔-2"}},[t._v("#")]),t._v(" Step 4: git 存檔")]),t._v(" "),n("p",[n("code",[t._v("git add .")]),n("br"),t._v(" "),n("code",[t._v('git commit -m "replace form with simple_form bootstrap template"')])]),t._v(" "),n("h2",{attrs:{id:"_4-9（解說）rails-的-crud-與-restful"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-9（解說）rails-的-crud-與-restful"}},[t._v("#")]),t._v(" 4-9（解說）Rails 的 CRUD 與 RESTful")]),t._v(" "),n("p",[t._v("如果你還在做第一遍練習時，請跳過這整章解說，否則你大腦會亂掉！"),n("br"),t._v("\n如果你還在做第一遍練習時，請跳過這整章解說，否則你大腦會亂掉！"),n("br"),t._v("\n如果你還在做第一遍練習時，請跳過這整章解說，否則你大腦會亂掉！")]),t._v(" "),n("ul",[n("li",[t._v("叫你滾出去還不明白嗎？")]),t._v(" "),n("li",[t._v("叫你滾出去還不明白嗎？")]),t._v(" "),n("li",[t._v("叫你滾出去還不明白嗎？")])]),t._v(" "),n("p",[t._v("好。我現在確定你應該已經是做第二遍了，才看這一篇解說的。")]),t._v(" "),n("h3",{attrs:{id:"http-請求-request）與-http-動作-verb）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-請求-request）與-http-動作-verb）"}},[t._v("#")]),t._v(" HTTP 請求( Request）與 HTTP 動作 ( Verb）")]),t._v(" "),n("p",[t._v("一般網頁的運作原理是這樣的：")]),t._v(" "),n("ol",[n("li",[t._v("使用者在瀏覽器輸入了某個網址，點擊了某個連結。這都叫發出 HTTP 請求 (Request）。")]),t._v(" "),n("li",[t._v("而瀏覽器回應之後：產生頁面，或者是重新導向。這都叫 HTTP 回應（Response）。")])]),t._v(" "),n("p",[t._v("一般來說，使用者最常使用的是兩種類型 / 動作 ( Verb )的請求： GET 與 POST。")]),t._v(" "),n("ul",[n("li",[t._v("GET ：輸入網址，點擊某些網址。這都是 GET。")]),t._v(" "),n("li",[t._v("POST：送出表單。這叫做 POST")])]),t._v(" "),n("h3",{attrs:{id:"restful-的基礎概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#restful-的基礎概念"}},[t._v("#")]),t._v(" RESTful 的基礎概念")]),t._v(" "),n("p",[t._v("因為 CRUD 是常見的操作行為，但是大家實作的方式、與網址設計方式不一樣。造成很多維護上的困擾。")]),t._v(" "),n("p",[t._v("後來就有人發明 RESTful 這個概念，希望用 HTTP 的動作 ( Verb）一起去封裝 CRUD 的行為。所以又多加了兩個動作：")]),t._v(" "),n("ul",[n("li",[t._v("PUT : 更新 ( update )")]),t._v(" "),n("li",[t._v("DELETE : 刪除 ( delete）")])]),t._v(" "),n("p",[t._v("而 Rails 的 Routing 也是依循這樣的理念去設計。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(479),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"rails-的基礎-restful概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rails-的基礎-restful概念"}},[t._v("#")]),t._v(" Rails 的基礎 RESTful概念")]),t._v(" "),n("p",[t._v("由於RESTful是個新手不容易一下子理解的概念，號稱學 Ruby on Rails 初期最大障礙。")]),t._v(" "),n("p",[t._v("在本篇儘量用淺顯易懂的方式解釋。如果看不懂也沒關係，用背的！！")]),t._v(" "),n("p",[t._v("一定要背起來！")]),t._v(" "),n("p",[n("img",{attrs:{src:a(480),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"以下例子以-第三章，-做出-crud-功能的討論版來解釋："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#以下例子以-第三章，-做出-crud-功能的討論版來解釋："}},[t._v("#")]),t._v(" 以下例子以 第三章， 做出 CRUD 功能的討論版來解釋：")]),t._v(" "),n("ul",[n("li",[t._v("討論版有個群組叫： groups。在 Restful 的概念裡把這個 groups 叫做 resources，“一組資源”的意思。")])]),t._v(" "),n("p",[t._v("為了要控制它的運作，我們會創建一個新的 Controller文件 叫做 groups_controller.rb")]),t._v(" "),n("p",[t._v("HTTP Verb 有四種：")]),t._v(" "),n("ul",[n("li",[t._v("新增 (create，使用 POST )")]),t._v(" "),n("li",[t._v("讀取 (read，使用 GET )")]),t._v(" "),n("li",[t._v("更新 (update，使用 PUT )")]),t._v(" "),n("li",[t._v("刪除 (destroy，使用 DELETE)")])]),t._v(" "),n("p",[t._v("在這組 controller 當中，我們會實作 7 個 Action ，4 張頁面。")]),t._v(" "),n("ul",[n("li",[t._v("首頁( index )：用來列出所有的討論版，可以選擇各個單版 （使用 GET )")]),t._v(" "),n("li",[t._v("各個討論版專屬頁面(show)：顯示討論版版名跟簡介 (使用 GET )")]),t._v(" "),n("li",[t._v("新增頁面(new)：裡面會有表單，填完以後可以送出 (使用 GET )")]),t._v(" "),n("li",[t._v("產生數據（create) ：new 送出來的表單到 create 這個 action，新增一筆數據 ( 使用 POST )")]),t._v(" "),n("li",[t._v("編輯頁面(edit)：裡面會有表單呈現現有數據來，填完數據後可以送出 (使用 GET )")]),t._v(" "),n("li",[t._v("更新數據（update)：edit 送出來的表單可以到 update 這個 action，更新該筆數據 (使用 PUT )")]),t._v(" "),n("li",[t._v("刪除數據：送出刪除請求，刪除該筆數據（使用 DELETE）")])]),t._v(" "),n("p",[t._v("這七個 action ，是每個CRUD功能裡最基本的動作。只要我們在 controller.rb 裡定義 (def) 好這七個方法當作動作 (action)。其他的部分 Rails 就會幫我們處理了。")]),t._v(" "),n("p",[t._v("像是設定 Routing (路由) 只需要簡單一行:")]),t._v(" "),n("div",{staticClass:"language-ruby extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# config/routes.rb")]),t._v("\nresources "),n("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":groups")]),t._v("\n")])])]),n("p",[t._v("這樣不管瀏覽器端跑來什麼樣的請求 (request) ，Routing都會聰明地幫我們導向正確的 action 去運作後續流程。")]),t._v(" "),n("h3",{attrs:{id:"網址對應關係"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#網址對應關係"}},[t._v("#")]),t._v(" 網址對應關係")]),t._v(" "),n("p",[t._v("對於網址跟對應的Action與頁面來說")]),t._v(" "),n("ul",[n("li",[t._v("/groups/ 一定就是 index，首頁，對應Routes路徑： groups_path")]),t._v(" "),n("li",[t._v("/groups/123 一定就是 show，名字為123的討論版個版頁面，對應Routes路徑： group_path(123)")]),t._v(" "),n("li",[t._v("/groups/123/edit 一定就是 edit，編輯討論版123的表單頁面，對應Routes路徑：edit_group_path(123)")]),t._v(" "),n("li",[t._v("/groups/new 一定就是 new，新增討論版的表單頁面，對應Routes路徑(或稱為helper)：new_group_path")])]),t._v(" "),n("h3",{attrs:{id:"總結"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#總結"}},[t._v("#")]),t._v(" 總結")]),t._v(" "),n("p",[t._v("所以製作一個 RESTful 風格的討論版，我們僅需在Routes設定一行程式碼即可")])])}),[],!1,null,null,null);s.default=e.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{419:function(e,t,r){e.exports=r.p+"assets/img/Xnip2020-08-09_16-19-47.8a1d5148.jpg"},507:function(e,t,r){"use strict";r.r(t);var l=r(23),_=Object(l.a)({},(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[l("h1",{attrs:{id:"_4-補充教材"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_4-補充教材"}},[e._v("#")]),e._v(" 4-補充教材")]),e._v(" "),l("blockquote",[l("p",[e._v("預計學習時間: 1小時")])]),e._v(" "),l("h2",{attrs:{id:"_4-1-補充教材：rails-架構"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-補充教材：rails-架構"}},[e._v("#")]),e._v(" 4-1 補充教材：Rails 架構")]),e._v(" "),l("h3",{attrs:{id:"目標"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#目標"}},[e._v("#")]),e._v(" 目標")]),e._v(" "),l("p",[e._v("做一個資料庫表格來儲存 topic，topic 有 title 和 description。")]),e._v(" "),l("p",[e._v("在這一步我們會學一點 Rails 的架構。最終你應該會瞭解這些觀念：")]),e._v(" "),l("ul",[l("li",[e._v("Table")]),e._v(" "),l("li",[e._v("Model")]),e._v(" "),l("li",[e._v("View")]),e._v(" "),l("li",[e._v("Controller")])]),e._v(" "),l("h3",{attrs:{id:"解說"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#解說"}},[e._v("#")]),e._v(" 解說")]),e._v(" "),l("h4",{attrs:{id:"rails-的架構以及它與資料庫的關聯"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#rails-的架構以及它與資料庫的關聯"}},[e._v("#")]),e._v(" Rails 的架構以及它與資料庫的關聯")]),e._v(" "),l("p",[e._v("Rails 把 "),l("strong",[e._v("Model/View/Controller")]),e._v(" 的設計模式實作得非常具體，來指引你如何設計你的網路應用程式。")]),e._v(" "),l("h4",{attrs:{id:"model"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#model"}},[e._v("#")]),e._v(" Model")]),e._v(" "),l("ul",[l("li",[e._v("我們在 RailsBridge 建立的 Model，其每一個 Model object 都在資料庫裡面有對應的資料。資料庫裡面的表格（table）是 Model 的 class name 的複數形。例如，如果 Model 叫做 'Duck'，就會自動去資料庫讀寫 'ducks' 這個表格。")]),e._v(" "),l("li",[e._v("Rails 內部的 methods 讓我們可以很容易把資料寫入到資料庫，之後再從資料庫裡面查詢（query）出來。")]),e._v(" "),l("li",[e._v("Model 是介於資料庫和你的程式碼之間的橋樑。")])]),e._v(" "),l("h4",{attrs:{id:"view"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#view"}},[e._v("#")]),e._v(" View")]),e._v(" "),l("ul",[l("li",[e._v("View 會產生 HTML 來顯示在瀏覽器。")]),e._v(" "),l("li",[e._v("View 檔案是用 ERB 寫的，它是一種樣板語言（Template Language）。裡面是 HTML 加上內嵌的 Ruby 程式碼。View 裡面的 Ruby 的變數便是當使用者要瀏覽該頁面的時候，所要填入的內容。")]),e._v(" "),l("li",[e._v("（還有別的樣板語言，但是在 RailsBridge 我們只用 ERB。）")])]),e._v(" "),l("h4",{attrs:{id:"controller"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#controller"}},[e._v("#")]),e._v(" Controller")]),e._v(" "),l("ul",[l("li",[e._v("Controller 把 Ruby 的 objects 在 Model 和 View 之間傳來傳去。")]),e._v(" "),l("li",[e._v("每一個 URL 都對應到 Controller 裡面的某一個特定的 method。")]),e._v(" "),l("li",[e._v("在這一步驟以後，當你打開你應用程式裡面的任何一個頁面，該請求（request）會被某個 Controller 的 method 處理。")])]),e._v(" "),l("p",[e._v("當我們把 Models、Views、Controllers 放在一起的時候，他們會遵循以下的模式：")]),e._v(" "),l("p",[e._v('給一個 URL，Rails 會去檢查要使用哪一個 Controller 裡面的 method（又稱為 "Action"）。Controller Action 會去呼叫 Model 裡面對應的 methods。Model 會去讀寫資料庫，然後把包含資料的 object 回傳到 Controller。Controller 會拿到這個 object 並且丟到 View 裡面。Action 通常會有對應的 View 檔案，Rails 會自動尋找並使用之。）')]),e._v(" "),l("p",[e._v("Models、Views、Controllers 有各自的工作。像這樣把責任拆開來，會比較容易開發，尤其是它長得愈來愈大的時候。（每個檔案都有清晰的責任，會比較容易處理問題、增加新功能。）")]),e._v(" "),l("p",[e._v("如果你想要學更多 Rails 架構的話，你可以看一下這個教學影片（三分半鐘）"),l("a",{attrs:{href:"https://www.youtube.com/watch?v=eTdVkgF_Slo",target:"_blank",rel:"noopener noreferrer"}},[e._v("“MVC 架構 YouTube”"),l("OutboundLink")],1)]),e._v(" "),l("h3",{attrs:{id:"實例"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#實例"}},[e._v("#")]),e._v(" 實例")]),e._v(" "),l("p",[l("img",{attrs:{src:r(419),alt:""}})]),e._v(" "),l("ul",[l("li",[e._v("1）瀏覽器發出對 "),l("code",[e._v("/users")]),e._v("  URL的請求。")]),e._v(" "),l("li",[e._v("2）Rails 將 "),l("code",[e._v("/users")]),e._v(" 透過路由（routes.rb），將請求引導到 "),l("code",[e._v("users_countroller")]),e._v(" 中的 "),l("code",[e._v("index")]),e._v(" 。")]),e._v(" "),l("li",[e._v("3）"),l("code",[e._v("index")]),e._v(" 中要求 "),l("code",[e._v("User model")]),e._v(" 查詢所有用戶（User.all）。")]),e._v(" "),l("li",[e._v("4）"),l("code",[e._v("User model")]),e._v(" 從資料庫中取出所有 user。")]),e._v(" "),l("li",[e._v("5）"),l("code",[e._v("User model")]),e._v(" 將 "),l("code",[e._v("user列表")]),e._v(" 回覆至 "),l("code",[e._v("users_controller")]),e._v("。")]),e._v(" "),l("li",[e._v("6）controller 將取回的 user列表寫入 "),l("code",[e._v("@users")]),e._v(" 變數中，並將變數傳遞到 "),l("code",[e._v("index view")]),e._v("。")]),e._v(" "),l("li",[e._v("7）view 將 "),l("code",[e._v("@users")]),e._v(" 變數帶入 index.html.erb 後轉為 index.html 並回傳 controller。")]),e._v(" "),l("li",[e._v("8）controller 將 HTML 傳回瀏覽器。")])])])}),[],!1,null,null,null);t.default=_.exports}}]);
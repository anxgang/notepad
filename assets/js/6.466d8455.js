(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{396:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-01_22-01-36.f65bebeb.jpg"},397:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-01_23-37-10.ec7ce0a1.jpg"},398:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-01_23-42-25.a629ac64.jpg"},399:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-01_23-51-28.de750ef1.jpg"},400:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-01_23-49-01.ee21696f.jpg"},401:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-01_23-54-25.ebf772b4.jpg"},402:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-02_01-13-18.8e6efd86.jpg"},403:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-01_23-55-57.808215d5.jpg"},404:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-02_00-00-55.f3124e55.jpg"},405:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-02_00-03-33.2b9f8b63.jpg"},406:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-02_00-07-23.5335fe84.jpg"},407:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-02_01-09-27.7f9241a2.jpg"},408:function(t,e,a){t.exports=a.p+"assets/img/Xnip2020-08-02_01-23-12.e4962966.jpg"},504:function(t,e,a){"use strict";a.r(e);var s=a(23),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_7-上傳專案到-heroku"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-上傳專案到-heroku"}},[t._v("#")]),t._v(" 7-上傳專案到 Heroku")]),t._v(" "),s("blockquote",[s("p",[t._v("預計學習時間: 1.5小時")])]),t._v(" "),s("h2",{attrs:{id:"_7-1-註冊-heroku-帳號"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-註冊-heroku-帳號"}},[t._v("#")]),t._v(" 7-1 註冊 Heroku 帳號")]),t._v(" "),s("h3",{attrs:{id:"目的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目的"}},[t._v("#")]),t._v(" 目的")]),t._v(" "),s("p",[t._v("讓網站能夠公開給大家看。")]),t._v(" "),s("h3",{attrs:{id:"_1-首先先註冊一個-heroku-帳號"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-首先先註冊一個-heroku-帳號"}},[t._v("#")]),t._v(" 1. 首先先註冊一個 Heroku 帳號")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.heroku.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.heroku.com"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_2-安裝-heroku-command-line-heroku-toolbelt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-安裝-heroku-command-line-heroku-toolbelt"}},[t._v("#")]),t._v(" 2. 安裝 Heroku Command Line (Heroku Toolbelt)")]),t._v(" "),s("p",[t._v("Heroku 所推出的環境命列工具包。"),s("br"),t._v("\n前往 "),s("a",{attrs:{href:"https://toolbelt.heroku.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://toolbelt.heroku.com"),s("OutboundLink")],1),t._v("\n依照網站指示下載安裝。")]),t._v(" "),s("p",[t._v("檢查是否完成安裝，可以輸入 "),s("code",[t._v("heroku --version")]),s("br"),t._v("\n應該會看到：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(396),alt:""}})]),t._v(" "),s("p",[t._v("（版本可能會不同，這是正常的）")]),t._v(" "),s("h3",{attrs:{id:"_3-完成-heroku-的-ssh-key-的設定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-完成-heroku-的-ssh-key-的設定"}},[t._v("#")]),t._v(" 3. 完成 Heroku 的 SSH-key 的設定")]),t._v(" "),s("p",[t._v("先輸入 "),s("code",[t._v("heroku login")]),t._v(" 確認登入，輸入email、密碼（密碼不會顯示，輸入完直接按return即可）")]),t._v(" "),s("p",[t._v("再輸入 "),s("code",[t._v("heroku keys:add")]),t._v(" 即可")]),t._v(" "),s("h3",{attrs:{id:"部署（deploy）是什麼？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署（deploy）是什麼？"}},[t._v("#")]),t._v(" 部署（deploy）是什麼？")]),t._v(" "),s("p",[t._v("我們所有的程式設計工作都是在自己的電腦完成，所以只能在自己的瀏覽器上看到成果，如果想要讓網站公開給大家看，但就必須將它放到伺服器上，這個把做好的網站安放到伺服器上的動作，就叫部署（deploy）。")]),t._v(" "),s("h3",{attrs:{id:"什麼是-heroku-？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什麼是-heroku-？"}},[t._v("#")]),t._v(" 什麼是 Heroku ？")]),t._v(" "),s("p",[t._v("Heroku 是 Rails 社群中，最方便穩定的網站部署工具。如果你開發了小型的網站，Heroku 提供了非常便利的部署工具。（用 Git 上傳就能部署）。")]),t._v(" "),s("h2",{attrs:{id:"_7-2-上傳專案到-heroku"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-上傳專案到-heroku"}},[t._v("#")]),t._v(" 7-2 上傳專案到 Heroku")]),t._v(" "),s("h3",{attrs:{id:"目的-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目的-2"}},[t._v("#")]),t._v(" 目的")]),t._v(" "),s("p",[t._v("上傳專案到 Heroku")]),t._v(" "),s("h3",{attrs:{id:"第一步-建立-heroku-專案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-建立-heroku-專案"}},[t._v("#")]),t._v(" 第一步 - 建立 heroku 專案")]),t._v(" "),s("p",[t._v("在終端機（Terminal）裡輸入 "),s("code",[t._v("heroku create")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(397),alt:""}})]),t._v(" "),s("p",[s("code",[t._v("heroku create")]),t._v(" 會在 Heroku 的系統裡面註冊新的應用程式。跑完之後你應該會看到輸出裡面告訴你新的應用程式的 URL。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[s("strong",[t._v("請不要重複執行 "),s("code",[t._v("heroku create")]),t._v(" 這個指令")]),s("br"),t._v("\n每輸入一次 heroku create 都會產生一個新的 herokuapp，免費帳號預設上限為5個。"),s("br"),t._v("\n超過 5 個的時候，請手動登入自己的 heroku 網址刪除app。")])]),t._v(" "),s("h3",{attrs:{id:"第二步-調整-gemfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步-調整-gemfile"}},[t._v("#")]),t._v(" 第二步 - 調整 Gemfile")]),t._v(" "),s("p",[t._v("在終端機（Terminal）輸入 "),s("code",[t._v("code .")])]),t._v(" "),s("p",[t._v("打開 Gemfile 文件，進行如下修改：")]),t._v(" "),s("h4",{attrs:{id:"_1-遷移-sqlite3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-遷移-sqlite3"}},[t._v("#")]),t._v(" 1.遷移 sqlite3")]),t._v(" "),s("p",[t._v("把 "),s("code",[t._v("gem 'sqlite3', '~>1.4'")]),t._v(" 整個剪下，貼到 "),s("code",[t._v("group :develop, :test do ... end")]),t._v(" 之中")]),t._v(" "),s("p",[s("img",{attrs:{src:a(398),alt:""}})]),t._v(" "),s("p",[t._v("變成下圖這樣")]),t._v(" "),s("p",[s("img",{attrs:{src:a(399),alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_2-加-pg-這個-gem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-加-pg-這個-gem"}},[t._v("#")]),t._v(" 2.加 'pg' 這個 gem")]),t._v(" "),s("p",[t._v("並且在剛剛 "),s("code",[t._v("gem 'sqlite3")]),t._v(" 的下方，再補上以下程式碼")]),t._v(" "),s("div",{staticClass:"language-ruby extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gemfile")]),t._v("\ngroup "),s("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":production")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" \n  gem "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pg'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),s("p",[t._v("如圖所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(400),alt:""}})]),t._v(" "),s("p",[t._v("請記得存檔！")]),t._v(" "),s("h4",{attrs:{id:"_3-執行-bundle-install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-執行-bundle-install"}},[t._v("#")]),t._v(" 3. 執行 "),s("code",[t._v("bundle install")])]),t._v(" "),s("p",[t._v("調整完 gemfile 後記得都要重新輸入 bundle")]),t._v(" "),s("p",[s("img",{attrs:{src:a(401),alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_4-調整-database-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-調整-database-yml"}},[t._v("#")]),t._v(" 4. 調整 database.yml")]),t._v(" "),s("p",[t._v("因為 heroku 必須使用 postgresql 所以將 production 的資料庫其調整為以下程式碼")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# config/database.yml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("production")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("<<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("*default")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("adapter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" postgresql\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("encoding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unicode\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:a(402),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"第三步-儲存目前版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步-儲存目前版本"}},[t._v("#")]),t._v(" 第三步 - 儲存目前版本")]),t._v(" "),s("p",[t._v("分別在終端機輸入以下程式碼")]),t._v(" "),s("p",[s("code",[t._v("git add .")]),s("br"),t._v(" "),s("code",[t._v('git commit -m "move sqlite3 to dev group & add pg to production group"')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(403),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"第四步-推上-heroku"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第四步-推上-heroku"}},[t._v("#")]),t._v(" 第四步 - 推上 heroku")]),t._v(" "),s("p",[t._v("找到 "),s("code",[t._v("config/routes.rb")]),t._v(" 檔案。"),s("br"),t._v("\n在第 2 行加入 "),s("code",[t._v('root "topics#index"')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(404),alt:""}})]),t._v(" "),s("p",[t._v("讓首頁根目錄指到 topics 的 index 清單頁。")]),t._v(" "),s("p",[t._v("之後我們一樣在終端機（Terminal）執行：")]),t._v(" "),s("p",[s("code",[t._v("git add .")]),s("br"),t._v(" "),s("code",[t._v('git commit -m "add root path"')])]),t._v(" "),s("p",[t._v("最後再輸入 "),s("code",[t._v("git push heroku master")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(405),alt:""}})]),t._v(" "),s("p",[t._v("（部署中...會等一段時間）")]),t._v(" "),s("p",[t._v("看到 "),s("code",[t._v("remote: Verfying deploy... done.")]),t._v(" 就代表部署成功")]),t._v(" "),s("p",[s("img",{attrs:{src:a(406),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"第五步-建立-heroku-資料庫"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第五步-建立-heroku-資料庫"}},[t._v("#")]),t._v(" 第五步 - 建立 heroku 資料庫")]),t._v(" "),s("p",[t._v("部署成功後，在終端機（Terminal）輸入")]),t._v(" "),s("p",[s("code",[t._v("heroku addons:create heroku-postgresql:hobby-dev")]),t._v("  新增一個資料庫")]),t._v(" "),s("p",[t._v("再輸入")]),t._v(" "),s("p",[s("code",[t._v("heroku run rake db:migrate")]),t._v("  建立資料表")]),t._v(" "),s("p",[s("img",{attrs:{src:a(407),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"第六步-查看網站"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第六步-查看網站"}},[t._v("#")]),t._v(" 第六步 - 查看網站")]),t._v(" "),s("p",[t._v("最後在終端輸入 "),s("code",[t._v("heroku open")]),t._v(" 就可以打開剛剛部署到 heroku 上的 app 了。恭喜你成功完成了部署。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(408),alt:""}})])])}),[],!1,null,null,null);e.default=r.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{420:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-15-55.d5cfdc04.jpg"},421:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_22-51-45.df406500.jpg"},422:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_22-51-25.c9021c63.jpg"},423:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_22-53-19.155d7f88.jpg"},424:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-02-03.2f651bf9.jpg"},425:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-07-07.7c0f1e4e.jpg"},426:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-10-09.ec3d6049.jpg"},427:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-12-36.fd18c8a3.jpg"},428:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-13-43.663c0729.jpg"},429:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-22-14.d880dff9.jpg"},430:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-23-33.1caf7c32.jpg"},431:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-25-48.aa10dd8f.jpg"},432:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-47-42.63b45e19.jpg"},433:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-49-04.3f658c23.jpg"},434:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-49-36.648418fe.jpg"},435:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-07_23-52-25.ce00ce62.jpg"},436:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-05-39.29252b59.jpg"},437:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-06-46.3205c562.jpg"},438:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-08-54.4884cff0.jpg"},439:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-09-42.a0d82899.jpg"},440:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-10-53.d0616791.jpg"},441:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-26-05.b9ff0726.jpg"},442:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-41-23.02b469fb.jpg"},443:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-43-31.8461fb4a.jpg"},444:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-47-03.95326df4.jpg"},445:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_00-49-44.17b18880.jpg"},446:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_08-32-16.535db96d.jpg"},447:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_09-45-22.ca6f4677.jpg"},448:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_09-46-43.2fd2a3cc.jpg"},449:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_21-15-56.db648cc0.jpg"},450:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-08_21-18-07.dadec000.jpg"},451:function(t,s,a){t.exports=a.p+"assets/img/Xnip2020-08-09_09-45-27.cabef60b.jpg"},508:function(t,s,a){"use strict";a.r(s);var e=a(23),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_3-初探-rails"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-初探-rails"}},[t._v("#")]),t._v(" 3-初探 Rails")]),t._v(" "),e("blockquote",[e("p",[t._v("預計學習時間: 4小時")])]),t._v(" "),e("h2",{attrs:{id:"_3-1-開始吧！"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-開始吧！"}},[t._v("#")]),t._v(" 3-1 開始吧！")]),t._v(" "),e("p",[e("img",{attrs:{src:a(420),alt:""}})]),t._v(" "),e("h3",{attrs:{id:"目標"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[t._v("建立你的 New Application")]),t._v(" "),e("p",[t._v("來，開始吧！在這一步驟的最後，我們會得到一個全新的（空白）Rails 應用程式。")]),t._v(" "),e("h3",{attrs:{id:"步驟"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1"}},[t._v("#")]),t._v(" 步驟 1")]),t._v(" "),e("p",[t._v("cd 的意思是切換目錄（"),e("strong",[t._v("C")]),t._v("hange "),e("strong",[t._v("D")]),t._v("irectory）")]),t._v(" "),e("p",[t._v("在終端機打這些字 ( Mac 或 Linux )")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cd ~\n")])])]),e("p",[t._v("cd ~ 切換（當前位置）到home目錄")]),t._v(" "),e("h4",{attrs:{id:"步驟-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2"}},[t._v("#")]),t._v(" 步驟 2")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mkdir railsbridge\n")])])]),e("p",[t._v("這會新增一個資料夾，讓我們把專案放在裡面。")]),t._v(" "),e("h4",{attrs:{id:"步驟-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-3"}},[t._v("#")]),t._v(" 步驟 3")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cd railsbridge\n")])])]),e("h4",{attrs:{id:"步驟-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-4"}},[t._v("#")]),t._v(" 步驟 4")]),t._v(" "),e("p",[t._v("確定一下你有沒有之前練習用的程式碼在裡面。")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ls\n")])])]),e("p",[t._v("這指令會列出 railsbridge 資料夾裡面的檔案。如果列出了舊的 suggestotron 應用程式，你可以刪掉它們來避免干擾：")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rm -rf suggestotron\n")])])]),e("h4",{attrs:{id:"步驟-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-5"}},[t._v("#")]),t._v(" 步驟 5")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rails new suggestotron\n")])])]),e("p",[t._v("rails new 會用你給的名字來建立新的 Rails 專案")]),t._v(" "),e("p",[t._v("這次我們建一個新的專案叫 suggestotron 。我們馬上就會詳述它到底建立了什麼。")]),t._v(" "),e("h4",{attrs:{id:"步驟-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-6"}},[t._v("#")]),t._v(" 步驟 6")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cd suggestotron\n")])])]),e("p",[t._v("cd 指的是切換目錄 ("),e("strong",[t._v("c")]),t._v("hange "),e("strong",[t._v("d")]),t._v("irectory)。")]),t._v(" "),e("p",[t._v("cd suggestotron 切換到 suggestotron 做為成當前資料夾。")]),t._v(" "),e("h4",{attrs:{id:"步驟-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-7"}},[t._v("#")]),t._v(" 步驟 7")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ls\n")])])]),e("p",[t._v("ls 指的是列出東西 ("),e("strong",[t._v("l")]),t._v("ist "),e("strong",[t._v("s")]),t._v("tuff)。")]),t._v(" "),e("p",[t._v("它會把目前資料夾的內容列出來給你看。")]),t._v(" "),e("h4",{attrs:{id:"步驟-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-8"}},[t._v("#")]),t._v(" 步驟 8")]),t._v(" "),e("p",[t._v("執行 VSCode 編輯器，用專案的方式打開 suggestotron 資料夾。")]),t._v(" "),e("p",[t._v("選擇 "),e("code",[t._v("檔案 > 開啟工作區")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(421),alt:""}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(422),alt:""}})]),t._v(" "),e("p",[t._v("在右上角輸入 suggestotron ，電腦會找到這給資料夾，點擊選擇它，如果一切沒問題的話，VSCode 會在視窗左邊以樹狀結構列出資料夾的內容：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(423),alt:""}})]),t._v(" "),e("p",[t._v("你會發現 rails new 開了一大堆資料夾和檔案。今天我們要看的是這些：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("檔案/資料夾")]),t._v(" "),e("th",[t._v("用途")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("app/")])]),t._v(" "),e("td",[t._v("包含你應用程式的 controllers、models、views。你要改的東西大多是這些。")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("config/")])]),t._v(" "),e("td",[t._v("設定應用程式的執行階段規則、路由設定（routes）、資料庫等等。")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("db/")])]),t._v(" "),e("td",[t._v("顯示你目前資料庫的 schema（結構定義），以及資料庫的 migrations。")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("public/")])]),t._v(" "),e("td",[t._v("這是唯一一個資料夾會是放什麼就出現什麼的。如果你把檔案放裡面，server 會直接回傳，不會經過 Rails 的處理。")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("app/javascript/")])]),t._v(" "),e("td",[t._v("你會要把圖片、JavaScript、stylesheets (CSS) 還有其他靜態檔案放在裡面。現代的 Rails 應用程式使用名為 Webpack 的前端打包工具，他能把在這資料夾裡面的所有 JavaScript 和 CSS 檔合併成一個檔案來加速。")])])])]),t._v(" "),e("p",[t._v("rails new 還建立了其他很多東西。大概可以寫一本書來講，所以我們現在先無視它們。")]),t._v(" "),e("h2",{attrs:{id:"_3-2-把專案加進-git-repo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-把專案加進-git-repo"}},[t._v("#")]),t._v(" 3-2 把專案加進 Git Repo")]),t._v(" "),e("h3",{attrs:{id:"目標-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-2"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("ul",[e("li",[t._v("建一個本地的 git repository（倉庫）")]),t._v(" "),e("li",[t._v("把所有檔案加入 git repository")])]),t._v(" "),e("p",[t._v("為了把我們的應用程式發佈到網絡上，我們要把我們的程式和過程中的修改都加到“版本控制系統”。我們會用 git ，因為它比較簡單，而且 Heroku 也用它。")]),t._v(" "),e("h3",{attrs:{id:"步驟-9"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-9"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1-2"}},[t._v("#")]),t._v(" 步驟 1")]),t._v(" "),e("p",[t._v("請用下面指令，確認你在 suggestotron 目錄裡")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("pwd\n")])])]),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git init\n")])])]),e("p",[e("img",{attrs:{src:a(424),alt:""}})]),t._v(" "),e("p",[t._v("git init 初始化 git 的意思，他會把相關資料放在 .git 的資料夾中，\n你也可以輸入 "),e("code",[t._v("ls -a")]),t._v("(列出所有檔案包含隱藏檔案) 來查看它。")]),t._v(" "),e("h4",{attrs:{id:"步驟-2-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2-2"}},[t._v("#")]),t._v(" 步驟 2")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("p",[e("code",[t._v("git status")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(425),alt:""}})]),t._v(" "),e("p",[t._v("git status 會告訴你 git 所見所有改過、新增、刪掉的東西。")]),t._v(" "),e("p",[t._v("第一次跑這個指令的時候，會看到很多東西。")]),t._v(" "),e("p",[t._v("第二次跑這個指令的時候，你不會看到很多東西。")]),t._v(" "),e("h4",{attrs:{id:"步驟-3-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-3-2"}},[t._v("#")]),t._v(" 步驟 3")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git add .\n")])])]),e("p",[t._v("git add . 告訴 git 你想要把目前資料夾（即 .）還有它底下的所有東西加進 repo。")]),t._v(" "),e("p",[t._v("在 Git 裡，有多個指令可以做到類似的事：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("git add foo.txt")]),t._v(" 把名叫 foo.txt 的檔案加進追蹤修訂。")]),t._v(" "),e("li",[e("code",[t._v("git add .")]),t._v(" 把所有新檔案和改過的檔案加進追蹤修訂，包含你刪掉的檔案。")])]),t._v(" "),e("h4",{attrs:{id:"步驟-4-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-4-2"}},[t._v("#")]),t._v(" 步驟 4")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("p",[e("code",[t._v('git commit -m "Added all the things"')])]),t._v(" "),e("p",[e("img",{attrs:{src:a(426),alt:""}})]),t._v(" "),e("p",[t._v("git commit 告訴 git 真的要執行你叫它做的事。")]),t._v(" "),e("p",[t._v("分成 add 和 commit 兩個步驟的好處是，如此你就可以把多個修改合併在一起。")]),t._v(" "),e("p",[t._v('-m "Added all the things 這個捷徑讓你可以直接寫下 commit message。')]),t._v(" "),e("h2",{attrs:{id:"_3-3-在本機執行你的程式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-在本機執行你的程式"}},[t._v("#")]),t._v(" 3-3 在本機執行你的程式")]),t._v(" "),e("h3",{attrs:{id:"目標-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-3"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[t._v("我們來把程式在本機啟動吧！")]),t._v(" "),e("h3",{attrs:{id:"步驟-10"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-10"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1-3"}},[t._v("#")]),t._v(" 步驟 1")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rails server\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[e("code",[t._v("rails server")]),t._v(" 可以簡寫為 "),e("code",[t._v("rails s")])])]),t._v(" "),e("h4",{attrs:{id:"步驟-2-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2-3"}},[t._v("#")]),t._v(" 步驟 2")]),t._v(" "),e("p",[t._v("在你的瀏覽器打開 "),e("a",{attrs:{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("然後你就會看到的程式跑起來了！")]),t._v(" "),e("p",[e("img",{attrs:{src:a(427),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"步驟-3-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-3-3"}},[t._v("#")]),t._v(" 步驟 3")]),t._v(" "),e("p",[t._v("在終端機裡面，server 跑起來的時候，隨時按下 "),e("code",[t._v("Ctrl+C")]),t._v(" 就可以把 server 關掉。你可以馬上試試看。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(428),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"_3-4-建立-migration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-建立-migration"}},[t._v("#")]),t._v(" 3-4 建立 Migration")]),t._v(" "),e("h3",{attrs:{id:"目標-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-4"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[e("img",{attrs:{src:a(429),alt:""}})]),t._v(" "),e("p",[t._v("我們的 suggestotron 會有一個 Topics （主題）列表讓大家來投票。我們會把 Topics 存進 database 裡面。在這一步你會做這些事：")]),t._v(" "),e("ul",[e("li",[t._v("在資料庫裡建立一個簡單的“表格（Table）”來儲存 Topics，每一篇 Topic 裡會有標題和正文內容。")]),t._v(" "),e("li",[t._v("在 Rails 裡自動產生相對應的 Scaffold（包含 Model、View、Controller）。")])]),t._v(" "),e("h3",{attrs:{id:"步驟-11"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-11"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1-4"}},[t._v("#")]),t._v(" 步驟 1")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rails generate scaffold topic title:string description:text\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[e("code",[t._v("rails generate")]),t._v(" 可以簡寫為 "),e("code",[t._v("rails g")])])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("generate scaffold")]),t._v(" 告訴 Rails 去建立一堆檔案讓 topics 可以動。")]),t._v(" "),e("li",[e("code",[t._v("topic")]),t._v(" 是告訴 rails 新的 Model 的名字是什麼。")]),t._v(" "),e("li",[e("code",[t._v("title:string")]),t._v(" 是說 topics 有標題（title），它是一個字串（String）。")]),t._v(" "),e("li",[e("code",[t._v("description:text")]),t._v(" 是說 topics 有正文內容（description），它是一段文字（Text）。（“字串”跟“文字”的差別？基本上“文字”是用來儲存可能會很長的字串。）")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(430),alt:""}})]),t._v(" "),e("p",[t._v("你若有興趣，可以花一點時間研究一下自動產生出來的檔案。")]),t._v(" "),e("p",[t._v("補充教材："),e("RouterLink",{attrs:{to:"/fullstack-camp/02-04.html#_4-1-補充教材：rails-架構"}},[t._v("“Rails 架構”")])],1),t._v(" "),e("h4",{attrs:{id:"步驟-2-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2-4"}},[t._v("#")]),t._v(" 步驟 2")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("p",[e("code",[t._v("rake db:migrate")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(431),alt:""}})]),t._v(" "),e("p",[t._v("告訴 Rails 更新資料庫來建立一個用來儲存新的 Model 的表格（Table）。")]),t._v(" "),e("h2",{attrs:{id:"_3-5-crud-和-scaffolding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-crud-和-scaffolding"}},[t._v("#")]),t._v(" 3-5 CRUD 和 Scaffolding")]),t._v(" "),e("h3",{attrs:{id:"目標-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-5"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[t._v("大部份基於資料庫的網站，其核心都是一樣的，都要把資料存起來並且提供方法來做這些事：")]),t._v(" "),e("p",[e("strong",[t._v("C")]),t._v(" - 建立（"),e("strong",[t._v("C")]),t._v("reate）新資料並存進資料庫。"),e("br"),t._v(" "),e("strong",[t._v("R")]),t._v(" - 讀取（"),e("strong",[t._v("R")]),t._v("ead）或顯示資料庫裡的資料。"),e("br"),t._v(" "),e("strong",[t._v("U")]),t._v(" - 更新（"),e("strong",[t._v("U")]),t._v("pdate）既有的資料。"),e("br"),t._v(" "),e("strong",[t._v("D")]),t._v(" - 刪除（"),e("strong",[t._v("D")]),t._v("estroy）資料。")]),t._v(" "),e("p",[t._v("這四個操作（CRUD）常見到 Rails 把它內建到 scaffold 指令裡面，我們可以很容易實作出來。")]),t._v(" "),e("h3",{attrs:{id:"步驟-12"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-12"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1-5"}},[t._v("#")]),t._v(" 步驟 1")]),t._v(" "),e("p",[t._v("在瀏覽器打開 "),e("a",{attrs:{href:"http://localhost:3000/topics",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000/topics"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("你應該會看到一個 “Listing Topics” 的頁面，有個空白但有 Title 和 Description 欄位標題的表格，還有一個連結可以新增 Topic：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(432),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"步驟-2-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2-5"}},[t._v("#")]),t._v(" 步驟 2")]),t._v(" "),e("ul",[e("li",[t._v("按一下 New Topic")]),t._v(" "),e("li",[t._v("填寫表單，然後按一下 Create Topic")]),t._v(" "),e("li",[t._v("你應該會看到一個網頁，裡面顯示你新建立的 topic，並且說你已經成功建立你的 topic 了：")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(433),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"步驟-3-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-3-4"}},[t._v("#")]),t._v(" 步驟 3")]),t._v(" "),e("ul",[e("li",[t._v("按一下 back")]),t._v(" "),e("li",[t._v("你應該會再看到 topics 列表，這次還有你剛剛新增的 topic：")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(434),alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("試試看 show、edit、destroy 連結看看會發生什麼事。")]),t._v(" "),e("li",[t._v("賀！你已經建立了一個基本的資料庫網站了！")])]),t._v(" "),e("h2",{attrs:{id:"_3-6-設定首頁"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-設定首頁"}},[t._v("#")]),t._v(" 3-6 設定首頁")]),t._v(" "),e("h3",{attrs:{id:"目標-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-6"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[t._v("現在結構已經打好了，來把流程變順暢吧。")]),t._v(" "),e("p",[t._v("現在你打開 "),e("a",{attrs:{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000"),e("OutboundLink")],1),t._v(' 的話，你會看到 "Yay! You’re on Rails!" 的字樣。')]),t._v(" "),e("p",[t._v("但如果 "),e("a",{attrs:{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000"),e("OutboundLink")],1),t._v(" 就可以直接跑到 topics 列表的話，會比較方便。")]),t._v(" "),e("p",[t._v("所以在這一步我們會實現它，並從中學習 Rails 路由（routes）的基本。")]),t._v(" "),e("h3",{attrs:{id:"步驟-13"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-13"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1：加入-root-route"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1：加入-root-route"}},[t._v("#")]),t._v(" 步驟 1：加入 root route")]),t._v(" "),e("p",[t._v("在 vscode 編輯器打開 config/routes.rb, 在")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("application"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("routes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("draw "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n")])])]),e("p",[t._v("下面加一行")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("root "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topics#index"')]),t._v("\n")])])]),e("p",[t._v("看起來會像這樣")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("application"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("routes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("draw "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  root "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topics#index"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(435),alt:""}})]),t._v(" "),e("p",[t._v("請記得存檔 "),e("code",[t._v("⌘ command + s")]),t._v("，修改才會生效。")]),t._v(" "),e("h4",{attrs:{id:"步驟-2：確認修改成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2：確認修改成功"}},[t._v("#")]),t._v(" 步驟 2：確認修改成功")]),t._v(" "),e("p",[t._v("回到 "),e("a",{attrs:{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000"),e("OutboundLink")],1),t._v(" 。你應該會被帶到 topics 列表。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(436),alt:""}})]),t._v(" "),e("h3",{attrs:{id:"部署（deploying）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署（deploying）"}},[t._v("#")]),t._v(" 部署（Deploying）")]),t._v(" "),e("p",[t._v("在繼續下一步之前，你可以考慮把程式上傳到 Heroku！")]),t._v(" "),e("p",[t._v("具體可以參考第一課"),e("a",{attrs:{href:"/fullstack-camp/01-07#_7-2-%E4%B8%8A%E5%82%B3%E5%B0%88%E6%A1%88%E5%88%B0-heroku"}},[t._v("相關章節")])]),t._v(" "),e("h2",{attrs:{id:"_3-7-對-topic-投票"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-對-topic-投票"}},[t._v("#")]),t._v(" 3-7 對 Topic 投票")]),t._v(" "),e("h3",{attrs:{id:"目標-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-7"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("ul",[e("li",[t._v("建立投票的 model")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(437),alt:""}})]),t._v(" "),e("p",[t._v("Suggestotron 裡面的每一個 topic 都可以投票。為了計算票數，我們要有投票記錄。來加個 table 吧。")]),t._v(" "),e("h3",{attrs:{id:"步驟-14"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-14"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("p",[t._v("在終端機打這些字：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rails generate model vote topic_id:integer\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("rake db:migrate\n")])])]),e("p",[e("img",{attrs:{src:a(438),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"_3-8-把投票記錄和-topics-接起來"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-把投票記錄和-topics-接起來"}},[t._v("#")]),t._v(" 3-8 把投票記錄和 Topics 接起來")]),t._v(" "),e("h3",{attrs:{id:"目標-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-8"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[e("img",{attrs:{src:a(439),alt:""}})]),t._v(" "),e("p",[t._v("資料庫裡面有了關聯號碼，接下來我們要來告訴 Rails，topic 和投票記錄之間有明確的關係。")]),t._v(" "),e("h3",{attrs:{id:"步驟-15"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-15"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1：告訴-topic-model-有-vote（投票記錄）的存在"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1：告訴-topic-model-有-vote（投票記錄）的存在"}},[t._v("#")]),t._v(" 步驟 1：告訴 Topic model 有 Vote（投票記錄）的存在")]),t._v(" "),e("p",[t._v("編輯 app/models/topic.rb 讓它長得像這樣：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Topic")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationRecord")]),t._v("\n  has_many "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":votes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dependent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":destroy")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(440),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"步驟-2：告訴-vote-model-有-topic-的存在"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2：告訴-vote-model-有-topic-的存在"}},[t._v("#")]),t._v(" 步驟 2：告訴 Vote model 有 Topic 的存在")]),t._v(" "),e("p",[t._v("編輯 app/models/vote.rb 讓它長得像這樣：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vote")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationRecord")]),t._v("\n  belongs_to "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":topic")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(441),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"步驟-3：進-rails-console-隨便玩玩看-topic-和-vote-model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-3：進-rails-console-隨便玩玩看-topic-和-vote-model"}},[t._v("#")]),t._v(" 步驟 3：進 Rails console 隨便玩玩看 Topic 和 Vote model")]),t._v(" "),e("p",[t._v("首先，先確定你已經開了至少一篇 topic。")]),t._v(" "),e("p",[t._v("然後，從終端機視窗進入 Rails console：")]),t._v(" "),e("p",[e("code",[t._v("rails c")])]),t._v(" "),e("p",[t._v("預期的結果：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Running via Spring preloader in process 11071\nLoading development environment (Rails 6.0.3.2)\n2.7.1 :001 >\n")])])]),e("p",[t._v("在 console 裡面試試看這些指令：")]),t._v(" "),e("p",[t._v("檢查總共有多少 topics：")]),t._v(" "),e("p",[t._v("繼續在終端機輸入")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Topic.count\n")])])]),e("p",[t._v("把第一篇 topic 存入變數")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("my_topic = Topic.first\n")])])]),e("p",[t._v("my_topic 可以是任何的變數名稱，不過現在我們一律用 my_topic。")]),t._v(" "),e("p",[t._v("把那個 topic 的 title 改成別的：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("my_topic.update_attributes(title: 'Edited in the console')\n")])])]),e("p",[t._v("新增一筆投票記錄給那個 topic：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("my_topic.votes.create\n")])])]),e("p",[t._v("檢查 topic 總共有多少筆投票：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("my_topic.votes.count\n")])])]),e("p",[t._v("刪除一筆那個 topic 的投票記錄：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("my_topic.votes.first.destroy\n")])])]),e("p",[t._v("最後，記得輸入 "),e("code",[t._v("exit")]),t._v(" 退出console。")]),t._v(" "),e("p",[t._v("請注意，你在 "),e("strong",[t._v("Model class")]),t._v("（例如 "),e("strong",[t._v("Topic")]),t._v("、"),e("strong",[t._v("Vote")]),t._v("）和 "),e("strong",[t._v("Model instance")]),t._v("（例如此例的my_topic）可以做的事是不一樣的。my_topic.votes稱作 association，在這裡的行為比較像是 model class。")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Class methods 和 Instance methods 的差異")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Model class / association 的 methods")]),t._v(" "),e("th",[t._v("Model instance 的 methods")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Topic.first")]),t._v(" "),e("td",[t._v("my_topic.title")])]),t._v(" "),e("tr",[e("td",[t._v("Topic.last")]),t._v(" "),e("td",[t._v("my_topic.title = 'New title'")])]),t._v(" "),e("tr",[e("td",[t._v("Topic.all")]),t._v(" "),e("td",[t._v("my_topic.update_attributes(title: 'New title')")])]),t._v(" "),e("tr",[e("td",[t._v("Topic.count")]),t._v(" "),e("td",[t._v("my_topic.save")])]),t._v(" "),e("tr",[e("td",[t._v("Topic.find_by_id(5)")]),t._v(" "),e("td",[t._v("my_topic.save!")])]),t._v(" "),e("tr",[e("td",[t._v("Topic.destroy_all")]),t._v(" "),e("td",[t._v("my_topic.destroy")])]),t._v(" "),e("tr",[e("td",[t._v("Topic.votes.count")]),t._v(" "),e("td",[t._v("my_topic.votes.first.destroy")])]),t._v(" "),e("tr",[e("td",[t._v("Topic.votes.create")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("Topic.votes.destroy_all")]),t._v(" "),e("td")])])])]),t._v(" "),e("p",[t._v("要看完整的列表的話，你可以上 "),e("a",{attrs:{href:"http://guides.rubyonrails.org/active_record_querying.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Active Record Query Interface RailsGuide"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"_3-9-讓大家可以投票"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-9-讓大家可以投票"}},[t._v("#")]),t._v(" 3-9 讓大家可以投票")]),t._v(" "),e("h3",{attrs:{id:"目標-9"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-9"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[t._v("現在我們要來加一個按鈕，讓大家可以按下去就投票加分。")]),t._v(" "),e("h3",{attrs:{id:"步驟-16"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-16"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1：加一個新的-controller-action-來投票加分"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1：加一個新的-controller-action-來投票加分"}},[t._v("#")]),t._v(" 步驟 1：加一個新的 controller action 來投票加分")]),t._v(" "),e("p",[t._v("編輯 app/controllers/topics_controller.rb 然後把以下這個 method 加在 controller 下方的 private這個keyword 之上：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("upvote")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("votes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create\n  redirect_to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topics_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(442),alt:""}})]),t._v(" "),e("p",[e("strong",[t._v("我們來看一下以上程式碼的代表的意義")])]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("從資料庫裡面用 id 找到 topic 然後存進 @topic 變數里面。")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("votes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create\n")])])]),e("p",[t._v("給目前這篇 topic 新增一筆投票記錄，然後存進資料庫裡面。")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("redirect_to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topics_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("跟瀏覽器說要回到 topics_path（topics 的列表）。")]),t._v(" "),e("h4",{attrs:{id:"步驟-2：給投票加分操作加一個-route"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2：給投票加分操作加一個-route"}},[t._v("#")]),t._v(" 步驟 2：給投票加分操作加一個 route")]),t._v(" "),e("p",[t._v("打開 config/routes.rb 然後找這個：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("（略）\nresources "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":topics")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("（略）\n")])])]),e("p",[t._v("取代之，讓整個檔案長得像這樣：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("application"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("routes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("draw "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  root "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'topics#index'")]),t._v("\n  resources "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":topics")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n    member "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n      post "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'upvote'")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(443),alt:""}})]),t._v(" "),e("p",[t._v("現在來檢查 route 有成功加入，方法是看一下 "),e("code",[t._v("rake routes")]),t._v(" 的輸出結果，或是打開 "),e("a",{attrs:{href:"http://localhost:3000/rails/info",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000/rails/info"),e("OutboundLink")],1),t._v("。你應該會看到有一行長得像這樣：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(444),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"步驟-3：在-view-裡面加一個按鈕"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-3：在-view-裡面加一個按鈕"}},[t._v("#")]),t._v(" 步驟 3：在 view 裡面加一個按鈕")]),t._v(" "),e("p",[t._v("編輯 "),e("code",[t._v("app/views/topics/index.html.erb")]),t._v(" 讓最下面的 loop（迴圈）程式碼長得像這樣：")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("topic"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("tr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("description "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" pluralize"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("votes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vote"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" button_to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" upvote_topic_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":post")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" link_to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Show'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" link_to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Edit'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" edit_topic_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" link_to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Destroy'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":delete")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" confirm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Are you sure?'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("tr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(445),alt:""}})]),t._v(" "),e("p",[e("strong",[t._v("我們來看一下以上程式碼的代表的意義")])]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("pluralize"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("votes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vote"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])]),e("p",[t._v("會輸出票數，並且根據（英文的）單複數在後面加上 'vote' 或 'votes' 單字。")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("button_to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+1'")]),t._v("\n")])])]),e("p",[t._v("加一個 HTML 的按鈕（button），裡面有字 '+1'。")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("upvote_topic_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("產生我們要呼叫的 action 的對應 URL。以此例而言，我們要對目前的 topic 投票加分。它會回傳 "),e("code",[t._v("/topics/42/upvote")]),t._v("（假設 topic.id 是 42 的話）")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("method"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":post")]),t._v("\n")])])]),e("p",[t._v("確保我們使用了 CRUD 裡面的 create 操作，而非 read。")]),t._v(" "),e("h4",{attrs:{id:"步驟-4：在瀏覽器裡面檢查修改成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-4：在瀏覽器裡面檢查修改成功"}},[t._v("#")]),t._v(" 步驟 4：在瀏覽器裡面檢查修改成功")]),t._v(" "),e("p",[t._v("回到 "),e("a",{attrs:{href:"http://localhost:3000/topics",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000/topics"),e("OutboundLink")],1),t._v(" 然後隨便玩玩看。")]),t._v(" "),e("p",[t._v("嗯，你發現了嗎，Rails程式可以一邊執行一邊被修改，不用“關閉--修改--重開”，酷吧？")]),t._v(" "),e("p",[e("img",{attrs:{src:a(446),alt:""}})]),t._v(" "),e("h3",{attrs:{id:"部署（deploying）-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署（deploying）-2"}},[t._v("#")]),t._v(" 部署（Deploying）")]),t._v(" "),e("p",[t._v("在繼續下一步之前，你可以考慮把程式上傳到 Heroku！")]),t._v(" "),e("h2",{attrs:{id:"_3-10-新增後能夠回到-topics-列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-新增後能夠回到-topics-列表"}},[t._v("#")]),t._v(" 3-10 新增後能夠回到 topics 列表")]),t._v(" "),e("p",[t._v("當使用者建立了一篇新的 topic、或是編輯既有的 topic 的時候，使用者將會看到單獨那一篇 topic 的頁面。但對於我們的投票程式來說，如果能夠回到 topics 列表會更好。")]),t._v(" "),e("p",[t._v("所以在這一步裡面我們將會修改程式的流程，讓 user 新增（create）topic 或編輯（update）topic 之後可以回到 topics 列表。")]),t._v(" "),e("h3",{attrs:{id:"步驟-17"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-17"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1：修改-topics-controller"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1：修改-topics-controller"}},[t._v("#")]),t._v(" 步驟 1：修改 topics controller")]),t._v(" "),e("p",[t._v("打開 app/controllers/topics_controller.rb 找到 create method。")]),t._v(" "),e("p",[t._v("找這一行：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("format"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" redirect_to "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notice"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Topic was successfully created.'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("把 @topic 改成 topics_path，像這樣：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("format"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" redirect_to topics_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notice"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Topic was successfully created.'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("最後會長得像這樣：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/topics_controller.rb")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic_params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  respond_to "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("format"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save\n      format"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" redirect_to topics_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notice"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Topic was successfully created.'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      format"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" render "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":show")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" status"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":created")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" location"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n      format"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" render "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      format"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" render json"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" status"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":unprocessable_entity")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(447),alt:""}})]),t._v(" "),e("p",[t._v("然後在同一個檔案裡面，找到 update method。")]),t._v(" "),e("p",[t._v("找這一行：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("format"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" redirect_to "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@topic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notice"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Topic was successfully updated.'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("跟之前一樣，把 @topic 改成 topics_path：")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("format"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" redirect_to topics_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" notice"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Topic was successfully updated.'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(448),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"步驟-2：確認修改成功-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2：確認修改成功-2"}},[t._v("#")]),t._v(" 步驟 2：確認修改成功")]),t._v(" "),e("p",[t._v("打開 "),e("a",{attrs:{href:"http://localhost:3000/topics",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:3000/topics"),e("OutboundLink")],1),t._v(" 然後玩玩看。")]),t._v(" "),e("h2",{attrs:{id:"_3-11-把-topic-標題變成可以點選的超連結"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-11-把-topic-標題變成可以點選的超連結"}},[t._v("#")]),t._v(" 3-11 把 Topic 標題變成可以點選的超連結")]),t._v(" "),e("h3",{attrs:{id:"目標-10"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-10"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[t._v("你朋友建議你把網站修改以下 2 個地方，看起來會更好：")]),t._v(" "),e("ul",[e("li",[t._v("不要在 topics 列表頁面出現本文內容。")]),t._v(" "),e("li",[t._v("把 topics 變成超連結，使用者必須點選 topics 才會顯示本文內容。")])]),t._v(" "),e("h3",{attrs:{id:"步驟-18"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-18"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1：拿掉本文內容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1：拿掉本文內容"}},[t._v("#")]),t._v(" 步驟 1：拿掉本文內容")]),t._v(" "),e("p",[t._v("首先來拿掉本文內容（description）吧。打開 app/views/topics/index.html.erb 然後刪掉這一行：")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("description "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("也刪掉這一行")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("th")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Description"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("th")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(449),alt:""}})]),t._v(" "),e("p",[t._v("現在可以試試看在瀏覽器裡面重新刷新，你應該會發現正文內容消失了。")]),t._v(" "),e("h4",{attrs:{id:"步驟-2：把標題變成超連結"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2：把標題變成超連結"}},[t._v("#")]),t._v(" 步驟 2：把標題變成超連結")]),t._v(" "),e("p",[t._v("現在來把標題變成超鏈接，編輯 app/views/topics/index.html.erb 然後把這一行：")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("改成這樣：")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" link_to topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(450),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"_3-12-清理-topics-列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-12-清理-topics-列表"}},[t._v("#")]),t._v(" 3-12 清理 Topics 列表")]),t._v(" "),e("h3",{attrs:{id:"目標-11"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目標-11"}},[t._v("#")]),t._v(" 目標")]),t._v(" "),e("p",[t._v("我們的程式快要完成了！topics 列表頁看起來很冗長。其實有一些連結是沒有用的。"),e("br"),t._v("\n來清理一下吧：")]),t._v(" "),e("ul",[e("li",[t._v("刪掉 show 超連結。")]),t._v(" "),e("li",[t._v("刪掉 edit 超連結。")]),t._v(" "),e("li",[t._v("把 destroy 改成 delete。")])]),t._v(" "),e("h3",{attrs:{id:"步驟-19"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-19"}},[t._v("#")]),t._v(" 步驟")]),t._v(" "),e("h4",{attrs:{id:"步驟-1：刪掉-show-和-edit-超連結"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-1：刪掉-show-和-edit-超連結"}},[t._v("#")]),t._v(" 步驟 1：刪掉 show 和 edit 超連結")]),t._v(" "),e("p",[t._v("打開 app/views/topics/index.html.erb 刪除這兩行：")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" link_to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Show'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" link_to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Edit'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" edit_topic_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h4",{attrs:{id:"步驟-2：把-destroy-改成-delete"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-2：把-destroy-改成-delete"}},[t._v("#")]),t._v(" 步驟 2：把 destroy 改成 delete")]),t._v(" "),e("p",[t._v("把有 Destroy 字樣的那一行修改成這樣：")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v("link_to "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Delete'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":delete")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" confirm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Are you sure?'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:a(451),alt:""}})]),t._v(" "),e("h4",{attrs:{id:"步驟-3：確認修改成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步驟-3：確認修改成功"}},[t._v("#")]),t._v(" 步驟 3：確認修改成功")]),t._v(" "),e("p",[t._v("存檔，然後重新刷新瀏覽器，看看修改有沒有成功。")]),t._v(" "),e("h2",{attrs:{id:"_3-13-加分題-下一步"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-13-加分題-下一步"}},[t._v("#")]),t._v(" 3-13 加分題 & 下一步")]),t._v(" "),e("blockquote",[e("p",[t._v("請做完第三課中級練習的同學再回來做")])]),t._v(" "),e("h3",{attrs:{id:"加分題"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加分題"}},[t._v("#")]),t._v(" 加分題")]),t._v(" "),e("p",[t._v("如果你完成了 Suggestotron 而還剩下一些時間，你可以試試看這些：")]),t._v(" "),e("ul",[e("li",[t._v("加一個“扣分”按鈕，做的事跟加分按鈕相反。")]),t._v(" "),e("li",[t._v("根據投票分數排序 topics。")]),t._v(" "),e("li",[t._v("新增一個 'about' 頁面，並將連結放在 topics 列表的最下方。記得也要在 About 頁面上放置回 Topics 列表的連結，以免使用者迷路。")])]),t._v(" "),e("h2",{attrs:{id:"_3-14-賀！你剛-完成-了你的第一個-rails-程式！"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-14-賀！你剛-完成-了你的第一個-rails-程式！"}},[t._v("#")]),t._v(" 3-14 賀！你剛“完成”了你的第一個 Rails 程式！")]),t._v(" "),e("p",[t._v("你知道嗎？你"),e("strong",[t._v("做完了")]),t._v("！！！"),e("br"),t._v("\n賀！你剛“完成”了你的第一個 Rails 程式！")]),t._v(" "),e("p",[t._v("接下來你可以進到： "),e("strong",[t._v("Rails101")])])])}),[],!1,null,null,null);s.default=r.exports}}]);